## Testing Fundamentals (Asoslar)

Bu bo'limda siz testlash nima uchun kerakligini, qaysi turdagi testlar borligini va junior darajada qanday qilib to'g'ri test yozishni tushunasiz. Maqsad — real loyihada xatolarni kamaytirish va ishonch bilan o'zgartirish kiritish.

### 1. Nega test yozamiz?

Testlar bizga quyidagilarni beradi:

- **Ishonch**: Kodingiz ishlashini tekshirgan bo'lasiz.
- **Regressiya oldini olish**: Yangi o'zgartirish eski funksiyani buzmasligini ko'rasiz.
- **Tezkor rivojlantirish**: Refaktor qilish qo'rquvsiz bo'ladi.

Oddiy misol: siz login funksiyasini o'zgartirdingiz. Testlar bo'lsa, eski funksiyalar buzilmaganini darrov bilasiz.

### 2. Test turlari (Testing Pyramid)

Testlar odatda quyidagicha bo'linadi:

1. **Unit test** — kichik funksiya yoki modulni alohida tekshiradi.
2. **Integration test** — bir nechta modul qanday ishlashini tekshiradi.
3. **End-to-End (E2E)** — foydalanuvchi kabi butun tizimni tekshiradi.

**Piramida qoidasi**: Unit testlar ko'p, Integration testlar o'rtacha, E2E testlar kam bo'ladi. Sababi E2E testlar qimmat va sekin ishlaydi.

### 3. Qaysi narsani test qilish kerak?

Junior uchun asosiy qoida:

- **Biznes mantiq**: hisob-kitoblar, validatsiya, shartlar.
- **Muhim funksiyalar**: foydalanuvchi uchun asosiy flowlar (login, checkout va boshqalar).

Quyidagilarni test qilish shart emas (yoki kamroq):

- Oddiy UI ko'rinishi (faqat text borligi kabi).
- 3rd-party kutubxona ishlashi.

### 4. Test yozish uchun toza kod

Test yozish oson bo'lishi uchun kod:

- **Kichik funksiyalarga bo'lingan** bo'lishi kerak.
- **Pure function** bo'lsa, test yozish oson.

Pure function misol: 

```javascript
function sum(a, b) {
  return a + b;
}
```

Bunday funksiyani test qilish juda sodda.

### 5. Deterministic testlar (barqaror testlar)

Testlar har safar bir xil natija berishi kerak.

**Yomon misol**: vaqtga bog'liq test.

```javascript
const now = new Date();
```

Agar test vaqtga bog'liq bo'lsa, u ba'zida o'tadi, ba'zida yiqiladi. Buni **flaky test** deyiladi.

**Yaxshi yechim**: vaqtni mock qilish yoki testda statik qiymat ishlatish.

### 6. Testlarning nomi va tuzilishi

Yaxshi test nomi:

- nima test qilinayotganini aniq aytadi
- kutilgan natijani ko'rsatadi

Misol:

```javascript
it("returns true when password length is at least 8", () => {
  // test
});
```

Tuzilish uchun oddiy pattern:

- **Arrange**: ma'lumot tayyorlash
- **Act**: funksiyani chaqirish
- **Assert**: natijani tekshirish

### 7. Mock, Stub, Spy (faqat tushuncha)

Bu tushunchalar testlarda **tashqi bog'liqliklarni** almashtirish uchun ishlatiladi.

- **Mock**: soxta versiya (masalan, API chaqiruv o'rniga).
- **Stub**: oldindan belgilangan javob beradi.
- **Spy**: funksiya chaqirilganini tekshiradi.

Junior uchun: asosiysi — **tashqi servislarga chiqishni testda haqiqiy qilmaslik**.

### 8. Test ma'lumotlari (Setup/Teardown)

Testdan oldin:

- kerakli data yaratiladi
- testdan keyin tozalanadi

Bu tartib testlar bir-biriga ta'sir qilmasligi uchun kerak.

### 9. Coverage (qamrov)

Coverage — testlar kodingizni qanchalik qamrab olganini ko'rsatadi.

**Eslatma**: 100% coverage har doim ham yaxshi degani emas. Muhimi — **muhim flowlar test qilingan bo'lishi**.

### 10. Testlarni qachon ishga tushirish?

Odatdagi amaliyot:

- **Lokal**: kod yozayotganda
- **CI (Continuous Integration)**: PR yoki merge oldidan
- **Pre-merge**: branch birlashtirishdan oldin

Bu jarayon jamoa uchun barqarorlik beradi.

---

Keyingi darslarda JavaScript va React testlari haqida amaliy misollar ko'ramiz.
